<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Home </title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
        }

        .sidebar {
            width: 250px;
            background: #006093;
            backdrop-filter: blur(10px);
            padding: 20px;
            border-right: 1px solid rgba(255, 255, 255, 0.2);
        }

        .sidebar-button {
            display: block;
            padding: 12px 20px;
            margin: 10px 0;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .sidebar-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateX(5px);
        }

        .content {
            flex: 1;
            padding: 40px;
            color: black;
            background: #ecf0f1;
        }

        h1 {
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        h2 {
            margin: 30px 0 20px;
            font-size: 1.8em;
        }

        .exam-catalog {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .exam-card {
            background: linear-gradient(135deg, #25978c 0%, #e6e6e6 100%);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .exam-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .exam-info {
            flex: 1;
        }

        .exam-info h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .exam-info p {
            color: #666;
            margin-bottom: 15px;
            font-size: 0.9em;
        }

        .exam-link {
            display: inline-block;
            padding: 10px 20px;
            background: #ff6b6b;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            transition: background 0.3s ease;
        }

        .exam-link:hover {
            background: #ff5252;
        }

        .attempts-table {
            width: 100%;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            border-collapse: collapse;
        }

        .attempts-table th,
        .attempts-table td {
            padding: 15px;
            text-align: left;
            color: #2c3e50;
            border-bottom: 1px solid #eee;
        }

        .attempts-table th {
            background: #f8f9fa;
            font-weight: 600;
        }

        .attempts-table tr:last-child td {
            border-bottom: none;
        }

        .attempts-table tr:hover td {
            background: #f8f9fa;
        }

        @media (max-width: 768px) {
            body {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            }

            .content {
                padding: 20px;
            }

            .exam-catalog {
                grid-template-columns: 1fr;
            }
        }
        
        .widget-container {
         

        }

        #current-time {
            font-size: 18px;
            margin-bottom: 10px;
        }

        #calendar {
            border: 1px solid #ddd;
            padding: 10px;
            display: inline-block;
            text-align: center;
            background: linear-gradient(135deg, #056bf1 0%, #e6e6e6 100%);
        }

        #calendar table {
            border-collapse: collapse;
            width: 100%;
        }

        #calendar th, #calendar td {
            border: 1px solid #ddd;
            padding: 5px;
            text-align: center;
        }

        #calendar th {
            
        }
    .cat-container {
            width: 30%;
            position: relative;
        }

        #ascii-cat {
            font-family: monospace;
            white-space: pre;
            color: #25978c;
            font-size: 12px;
        } 
        
          .scroller {
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            width: 50%;
            color: white;
            font-size: 1.2em;
            padding: 30px 0;
        }

        .scroller span {
            position: absolute;
            animation: scroll-text 10s linear infinite;
            white-space: nowrap;
        }

        @keyframes scroll-text {
            0% {
                transform: translateX(100%);
            }
            100% {
                transform: translateX(-100%);
            }
        }
        
        
               .todo-container {
            margin-top: 40px;
        }

        .todo-form {
            margin-bottom: 20px;
            
        }

        .todo-form input, .todo-form button {
            padding: 10px;
            border: none;
            border-radius: 5px;
            margin-right: 10px;
            
        }

        .todo-form input {
            width: 200px;
        }

        .todo-form button {
            background: #4caf50;
            color: white;
            cursor: pointer;
        }

        .todo-form button:hover {
            background: #45a049;
        }

        .todo-list {
            margin-top: 20px;
            
        }

        .todo-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            color: #333;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .todo-item button {
            margin-left: 10px;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .update-button {
            background: #007bff;
            color: white;
        }

        .update-button:hover {
            background: #0056b3;
        }

        .delete-button {
            background: #ff6b6b;
            color: white;
        }

        .delete-button:hover {
            background: #e63946;
        }
        
         .todo-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
        background: linear-gradient(135deg, #056bf1 0%, #e6e6e6 100%);
    }

    .todo-table th, .todo-table td {
        text-align: left;
        padding: 10px;
        border-bottom: 1px solid #ddd;
        color:black
    }

    .todo-table th {
       
    }

    .todo-table tr:hover {
       
    }
    
     .icon-button {
        background: none;
        border: none;
        cursor: pointer;
        padding: 0;
        margin: 0;
    }

    .icon-button img {
        width: 16px;
        height: 16px;
    }

    .icon-button:hover img {
        transform: scale(1.1);
    }

    .delete-button img {
        filter: brightness(0) saturate(100%) invert(23%) sepia(86%) saturate(645%) hue-rotate(358deg) brightness(93%) contrast(91%);
    }

    .update-button img {
        filter: brightness(0) saturate(100%) invert(35%) sepia(75%) saturate(419%) hue-rotate(184deg) brightness(93%) contrast(93%);
    }

       .todo-container {
            margin-top: 40px;
        }

        .todo-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .todo-table th, .todo-table td {
            text-align: left;
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }

        .todo-table th {
            background: rgba(255, 255, 255, 0.2);
        }

        .todo-table td {
            background: rgba(255, 255, 255, 0.1);
            color: black;
        }

        .todo-table tr:hover td {
            background: rgba(255, 255, 255, 0.2);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            width: 300px;
            text-align: center;
        }

        .modal-content h3 {
            margin-bottom: 20px;
        }

        .modal-content input {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .modal-content button {
            padding: 10px 20px;
            margin-top: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .modal-content .submit-button {
            background: #4caf50;
            color: white;
        }

        .modal-content .cancel-button {
            background: #f44336;
            color: white;
        }

        .modal-content .submit-button:hover {
            background: #45a049;
        }

        .modal-content .cancel-button:hover {
            background: #e53935;
        }

        .add-task-btn {
            padding: 12px 20px;
            background: #0078d7;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .add-task-btn:hover {
            background: #0056a1;
        }
        
    </style>
</head>
<body>
    <div class="sidebar">
    <center> <img src="static/logo.png" alt="Backbench Logo" ></center>
            <a href="{{ url_for('user_home') }}" class="sidebar-button">Classroom</a>
            <a href="{{ url_for('attempts') }}" class="sidebar-button">Past Exam Attempts</a>
             <a href="{{ url_for('task') }}" class="sidebar-button">Task</a>
            <a href="{{ url_for('countdown') }}" class="sidebar-button">Timer</a>
            <a href="{{ url_for('settings') }}" class="sidebar-button">Settings</a>
        <a href="{{ url_for('logout') }}" class="sidebar-button">Bye</a>
    </div>

    <div class="content">
        <h1>Welcome, {{ current_user.username }}!</h1> 
               <div class="cat-container">
            <pre id="ascii-cat"></pre>
                  
        </div>
    
 
        <div class="widget-container">
                <div id="current-time"></div>
                <div id="calendar"></div>
        
        </div>
        
   <h2>To-Do List</h2>

        <!-- To-Do Form -->
        <div class="todo-container">
            <!-- Button to open modal -->
        <button class="add-task-btn" onclick="openModal()">Add Task</button>

        <!-- Modal for adding tasks -->
<div id="taskModal" class="modal">
    <div class="modal-content">
        <h3>Add New Task</h3>
        <!-- Form Submission -->
        <form class="todo-form" method="POST" action="/add_todo">
            <input type="text" id="taskName" name="task" placeholder="Task Name" required>
            <input type="date" id="taskDate" name="date" required>
            <button type="submit" class="submit-button">Add Task</button>
            <button type="button" class="cancel-button" onclick="closeModal()">Cancel</button>
        </form>
    </div>
</div>
            <!-- Display To-Do List -->
            <table  class="todo-table">
        <thead>
            <tr>
                <th>Task</th>
                <th>Due Date</th>
                <th></th>
            </tr>
        </thead>
        <tbody id="todoList">
            {% for todo in todos %}
            <tr>
                <td>{{ todo.task }}</td>
                <td>{{ todo.date }}</td>
                <td>
           
                    <!-- Delete Form -->
                    <form method="POST" action="/delete_todo/{{ todo.id }}" style="display: inline;">
                        <button type="submit" >
                        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 22 22" style="enable-background:new 0 0 284.014 284.014;" xml:space="preserve" width="22" height="22"><g id="XMLID_28_"><g><path style="fill:#16A085;" d="M17.596 6.529c0.363 0.173 0.519 0.609 0.346 0.972l-0.223 0.469 -11.285 -5.36 0.223 -0.469c0.173 -0.364 0.61 -0.519 0.973 -0.346z"></path><path style="fill:#1ABC9C;" d="m14.074 7.957 -0.948 11.377c-0.052 0.626 -0.585 1.116 -1.213 1.116h-5.696c-0.627 0 -1.16 -0.49 -1.212 -1.116l-0.948 -11.377z"></path><path d="M18.26 5.129c1.135 0.539 1.62 1.902 1.081 3.036l-0.555 1.169c-0.133 0.28 -0.411 0.443 -0.7 0.443 -0.112 0 -0.225 -0.024 -0.332 -0.075l-2.184 -1.038 -0.9 10.799c-0.119 1.422 -1.329 2.537 -2.757 2.537h-5.696c-1.427 0 -2.638 -1.115 -2.756 -2.537l-1.019 -12.216c-0.018 -0.215 0.056 -0.429 0.202 -0.589s0.353 -0.25 0.57 -0.25h7.605l-5.749 -2.73a0.774 0.774 0 0 1 -0.367 -1.032l0.555 -1.169c0.539 -1.136 1.901 -1.62 3.036 -1.081l2.169 1.03 0.113 -0.236c0.238 -0.502 0.658 -0.882 1.181 -1.068 0.524 -0.186 1.088 -0.157 1.59 0.081l1.869 0.887c1.036 0.493 1.479 1.736 0.987 2.772l-0.113 0.237zm-0.318 2.372c0.173 -0.363 0.017 -0.799 -0.346 -0.972l-9.966 -4.734c-0.363 -0.173 -0.8 -0.018 -0.973 0.346l-0.223 0.469 11.285 5.36zm-3.138 -4.304c0.125 -0.265 0.012 -0.583 -0.253 -0.708l-1.868 -0.888a0.527 0.527 0 0 0 -0.406 -0.02 0.527 0.527 0 0 0 -0.302 0.273l-0.112 0.236 2.829 1.344zm-1.679 16.137 0.948 -11.377H4.056l0.948 11.377c0.052 0.626 0.585 1.116 1.212 1.116h5.696c0.628 0 1.161 -0.49 1.213 -1.116"></path></g></g></svg>
                              </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
            
            
            
            
        </div>       
        
      
        
       
    
   
 <script>
        // Open Modal
        function openModal() {
            document.getElementById('taskModal').style.display = 'flex';
        }

        // Close Modal
        function closeModal() {
            document.getElementById('taskModal').style.display = 'none';
        }

       document.querySelector('.todo-form').addEventListener('submit', function () {
    closeModal();
});
    </script> 

            `

    
 <script>
        // Function to update the current time
        function updateTime() {
            const currentTimeDiv = document.getElementById('current-time');
            const now = new Date();
            const options = {  hour: '2-digit', minute: '2-digit', second: '2-digit' };
            currentTimeDiv.innerText =  now.toLocaleDateString('en-US', options);
        }

// Function to generate a simple calendar for the current month
function generateCalendar() {
    const calendarDiv = document.getElementById('calendar');
    const now = new Date();
    const year = now.getFullYear();
    const month = now.getMonth();
    const today = now.getDate(); // Get the current date

    const monthNames = [
        "January", "February", "March", "April", "May", "June", "July",
        "August", "September", "October", "November", "December"
    ];

    const firstDay = new Date(year, month, 1).getDay();
    const lastDate = new Date(year, month + 1, 0).getDate();

    let calendarHTML = `<h3>${monthNames[month]} ${year}</h3>`;
    calendarHTML += `
        <table>
            <thead>
                <tr>
                    <th>Sun</th>
                    <th>Mon</th>
                    <th>Tue</th>
                    <th>Wed</th>
                    <th>Thu</th>
                    <th>Fri</th>
                    <th>Sat</th>
                </tr>
            </thead>
            <tbody>
    `;

    let day = 1;
    for (let i = 0; i < 6; i++) {
        calendarHTML += '<tr>';
        for (let j = 0; j < 7; j++) {
            if (i === 0 && j < firstDay || day > lastDate) {
                calendarHTML += '<td></td>'; // Empty cells
            } else {
                if (day === today) {
                    // Highlight the current date
                    calendarHTML += `<td style="background-color: #79CCBF; color: white; border-radius: 50%;">${day}</td>`;
                } else {
                    calendarHTML += `<td>${day}</td>`;
                }
                day++;
            }
        }
        calendarHTML += '</tr>';
        if (day > lastDate) break;
    }

    calendarHTML += '</tbody></table>';
    calendarDiv.innerHTML = calendarHTML;
}

// Initialize the widget
document.addEventListener('DOMContentLoaded', () => {
    updateTime();
    generateCalendar();
    setInterval(updateTime, 1000); // Update the time every second
});

    </script>
    
</body>
</html>