<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Home </title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
        }

        .sidebar {
            width: 250px;
            background: #006093;
            backdrop-filter: blur(10px);
            padding: 20px;
            border-right: 1px solid rgba(255, 255, 255, 0.2);
        }

        .sidebar-button {
            display: block;
            padding: 12px 20px;
            margin: 10px 0;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .sidebar-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateX(5px);
        }

        .content {
            flex: 1;
            padding: 40px;
            color: black;
            background: #ecf0f1;
        }

        h1 {
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        h2 {
            margin: 30px 0 20px;
            font-size: 1.8em;
        }

        .exam-catalog {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .exam-card {
            background: linear-gradient(135deg, #25978c 0%, #e6e6e6 100%);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .exam-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .exam-info {
            flex: 1;
        }

        .exam-info h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .exam-info p {
            color: #666;
            margin-bottom: 15px;
            font-size: 0.9em;
        }

        .exam-link {
            display: inline-block;
            padding: 10px 20px;
            background: #ff6b6b;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            transition: background 0.3s ease;
        }

        .exam-link:hover {
            background: #ff5252;
        }

        .attempts-table {
            width: 100%;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            border-collapse: collapse;
        }

        .attempts-table th,
        .attempts-table td {
            padding: 15px;
            text-align: left;
            color: #2c3e50;
            border-bottom: 1px solid #eee;
        }

        .attempts-table th {
            background: #f8f9fa;
            font-weight: 600;
        }

        .attempts-table tr:last-child td {
            border-bottom: none;
        }

        .attempts-table tr:hover td {
            background: #f8f9fa;
        }

        @media (max-width: 768px) {
            body {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            }

            .content {
                padding: 20px;
            }

            .exam-catalog {
                grid-template-columns: 1fr;
            }
        }
        
        .widget-container {
         

        }

        #current-time {
            font-size: 18px;
            margin-bottom: 10px;
        }

        #calendar {
            border: 1px solid #ddd;
            padding: 10px;
            display: inline-block;
            text-align: center;
            background: linear-gradient(135deg, #056bf1 0%, #e6e6e6 100%);
        }

        #calendar table {
            border-collapse: collapse;
            width: 100%;
        }

        #calendar th, #calendar td {
            border: 1px solid #ddd;
            padding: 5px;
            text-align: center;
        }

        #calendar th {
            
        }
    .cat-container {
            width: 30%;
            position: relative;
        }

        #ascii-cat {
            font-family: monospace;
            white-space: pre;
            color: #25978c;
            font-size: 12px;
        } 
        
          .scroller {
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            width: 50%;
            color: white;
            font-size: 1.2em;
            padding: 30px 0;
        }

        .scroller span {
            position: absolute;
            animation: scroll-text 10s linear infinite;
            white-space: nowrap;
        }

        @keyframes scroll-text {
            0% {
                transform: translateX(100%);
            }
            100% {
                transform: translateX(-100%);
            }
        }
        
        
               .todo-container {
            margin-top: 40px;
        }

        .todo-form {
            margin-bottom: 20px;
            
        }

        .todo-form input, .todo-form button {
            padding: 10px;
            border: none;
            border-radius: 5px;
            margin-right: 10px;
            
        }

        .todo-form input {
            width: 200px;
        }

        .todo-form button {
            background: #4caf50;
            color: white;
            cursor: pointer;
        }

        .todo-form button:hover {
            background: #45a049;
        }

        .todo-list {
            margin-top: 20px;
            
        }

        .todo-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            color: #333;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .todo-item button {
            margin-left: 10px;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .update-button {
            background: #007bff;
            color: white;
        }

        .update-button:hover {
            background: #0056b3;
        }

        .delete-button {
            background: #ff6b6b;
            color: white;
        }

        .delete-button:hover {
            background: #e63946;
        }
        
         .todo-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
        background: linear-gradient(135deg, #056bf1 0%, #e6e6e6 100%);
    }

    .todo-table th, .todo-table td {
        text-align: left;
        padding: 10px;
        border-bottom: 1px solid #ddd;
        color:black
    }

    .todo-table th {
       
    }

    .todo-table tr:hover {
       
    }
    
     .icon-button {
        background: none;
        border: none;
        cursor: pointer;
        padding: 0;
        margin: 0;
    }

    .icon-button img {
        width: 16px;
        height: 16px;
    }

    .icon-button:hover img {
        transform: scale(1.1);
    }

    .delete-button img {
        filter: brightness(0) saturate(100%) invert(23%) sepia(86%) saturate(645%) hue-rotate(358deg) brightness(93%) contrast(91%);
    }

    .update-button img {
        filter: brightness(0) saturate(100%) invert(35%) sepia(75%) saturate(419%) hue-rotate(184deg) brightness(93%) contrast(93%);
    }

       .todo-container {
            margin-top: 40px;
        }

        .todo-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .todo-table th, .todo-table td {
            text-align: left;
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }

        .todo-table th {
            background: rgba(255, 255, 255, 0.2);
        }

        .todo-table td {
            background: rgba(255, 255, 255, 0.1);
            color: black;
        }

        .todo-table tr:hover td {
            background: rgba(255, 255, 255, 0.2);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            width: 300px;
            text-align: center;
        }

        .modal-content h3 {
            margin-bottom: 20px;
        }

        .modal-content input {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .modal-content button {
            padding: 10px 20px;
            margin-top: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .modal-content .submit-button {
            background: #4caf50;
            color: white;
        }

        .modal-content .cancel-button {
            background: #f44336;
            color: white;
        }

        .modal-content .submit-button:hover {
            background: #45a049;
        }

        .modal-content .cancel-button:hover {
            background: #e53935;
        }

        .add-task-btn {
            padding: 12px 20px;
            background: #0078d7;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .add-task-btn:hover {
            background: #0056a1;
        }
        
    </style>
</head>
<body>
    <div class="sidebar">
    <center> <img src="static/logo.png" alt="Backbench Logo" ></center>
            <a href="{{ url_for('user_home') }}" class="sidebar-button">Classroom</a>
            <a href="{{ url_for('attempts') }}" class="sidebar-button">Past Exam Attempts</a>
            <a href="{{ url_for('countdown') }}" class="sidebar-button">Timer</a>
            <a href="{{ url_for('settings') }}" class="sidebar-button">Settings</a>
        <a href="{{ url_for('logout') }}" class="sidebar-button">Bye</a>
    </div>

    <div class="content">
        <h1>Welcome, {{ current_user.username }}!</h1> 
               <div class="cat-container">
            <pre id="ascii-cat"></pre>
                  
        </div>
    
 
        <div class="widget-container">
                <div id="current-time"></div>
                <div id="calendar"></div>
        
        </div>
        
   <h2>To-Do List</h2>

        <!-- To-Do Form -->
        <div class="todo-container">
            <!-- Button to open modal -->
        <button class="add-task-btn" onclick="openModal()">Add Task</button>

        <!-- Modal for adding tasks -->
<div id="taskModal" class="modal">
    <div class="modal-content">
        <h3>Add New Task</h3>
        <!-- Form Submission -->
        <form class="todo-form" method="POST" action="/add_todo">
            <input type="text" id="taskName" name="task" placeholder="Task Name" required>
            <input type="date" id="taskDate" name="date" required>
            <button type="submit" class="submit-button">Add Task</button>
            <button type="button" class="cancel-button" onclick="closeModal()">Cancel</button>
        </form>
    </div>
</div>
            <!-- Display To-Do List -->
            <table  class="todo-table">
        <thead>
            <tr>
                <th>Task</th>
                <th>Due Date</th>
                <th></th>
            </tr>
        </thead>
        <tbody id="todoList">
            {% for todo in todos %}
            <tr>
                <td>{{ todo.task }}</td>
                <td>{{ todo.date }}</td>
                <td>
           
                    <!-- Delete Form -->
                    <form method="POST" action="/delete_todo/{{ todo.id }}" style="display: inline;">
                        <button type="submit" >
                        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 22 22" style="enable-background:new 0 0 284.014 284.014;" xml:space="preserve" width="22" height="22"><g id="XMLID_28_"><g><path style="fill:#16A085;" d="M17.596 6.529c0.363 0.173 0.519 0.609 0.346 0.972l-0.223 0.469 -11.285 -5.36 0.223 -0.469c0.173 -0.364 0.61 -0.519 0.973 -0.346z"></path><path style="fill:#1ABC9C;" d="m14.074 7.957 -0.948 11.377c-0.052 0.626 -0.585 1.116 -1.213 1.116h-5.696c-0.627 0 -1.16 -0.49 -1.212 -1.116l-0.948 -11.377z"></path><path d="M18.26 5.129c1.135 0.539 1.62 1.902 1.081 3.036l-0.555 1.169c-0.133 0.28 -0.411 0.443 -0.7 0.443 -0.112 0 -0.225 -0.024 -0.332 -0.075l-2.184 -1.038 -0.9 10.799c-0.119 1.422 -1.329 2.537 -2.757 2.537h-5.696c-1.427 0 -2.638 -1.115 -2.756 -2.537l-1.019 -12.216c-0.018 -0.215 0.056 -0.429 0.202 -0.589s0.353 -0.25 0.57 -0.25h7.605l-5.749 -2.73a0.774 0.774 0 0 1 -0.367 -1.032l0.555 -1.169c0.539 -1.136 1.901 -1.62 3.036 -1.081l2.169 1.03 0.113 -0.236c0.238 -0.502 0.658 -0.882 1.181 -1.068 0.524 -0.186 1.088 -0.157 1.59 0.081l1.869 0.887c1.036 0.493 1.479 1.736 0.987 2.772l-0.113 0.237zm-0.318 2.372c0.173 -0.363 0.017 -0.799 -0.346 -0.972l-9.966 -4.734c-0.363 -0.173 -0.8 -0.018 -0.973 0.346l-0.223 0.469 11.285 5.36zm-3.138 -4.304c0.125 -0.265 0.012 -0.583 -0.253 -0.708l-1.868 -0.888a0.527 0.527 0 0 0 -0.406 -0.02 0.527 0.527 0 0 0 -0.302 0.273l-0.112 0.236 2.829 1.344zm-1.679 16.137 0.948 -11.377H4.056l0.948 11.377c0.052 0.626 0.585 1.116 1.212 1.116h5.696c0.628 0 1.161 -0.49 1.213 -1.116"></path></g></g></svg>
                              </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
            
            
            
            
        </div>       
        
      
        
        <h2>Explore Available Exams</h2>
        <div class="exam-catalog">
            {% for exam in exams %}
            <div class="exam-card">
                <svg width="64px" height="64px" viewBox="0 0 81.92 81.92" class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M73.368 42.448c0 -2.07 -0.738 -3.817 -2.127 -5.054 -1.856 -1.664 -4.581 -2.08 -6.453 -1.747 -0.65 0.114 -1.399 0.385 -2.158 0.775 0.208 -1.279 0.4 -2.574 0.551 -3.895 0.047 -0.4 -0.317 -1.212 -1.134 -1.212H11.145c-0.744 0 -1.154 0.879 -1.102 1.305C11.488 44.938 15.448 55.582 21.156 62.232H11.766c-0.824 0 -1.594 0.309 -2.142 0.845 -0.642 0.601 -0.978 1.443 -0.918 2.311 0.262 3.827 7.916 6.77 13.677 7.555 0.593 0.523 1.739 1.344 3.759 1.344h21.953c2.147 0 3.304 -0.92 3.757 -1.344 5.756 -0.782 13.412 -3.725 13.672 -7.516 0.075 -0.853 -0.242 -1.698 -0.894 -2.342 -0.58 -0.551 -1.344 -0.853 -2.155 -0.853H52.237c1.519 -1.661 4.436 -3.351 7.524 -5.137 6.375 -3.676 13.607 -7.841 13.607 -14.647m-16.462 12.458c1.991 -3.947 3.603 -8.528 4.758 -13.545 1.003 -1.258 2.595 -2.205 3.65 -2.392 1.112 -0.187 2.839 0.094 3.863 0.998 0.661 0.588 0.983 1.399 0.983 2.48 0 4.809 -6.338 8.465 -11.938 11.689 -0.447 0.26 -0.879 0.515 -1.315 0.77" fill="#27323A"/><path d="M27.389 27.158c15.141 0 18.843 -2.579 18.843 -5.616 0 -3.411 -3.596 -4.412 -7.155 -7.529 -0.759 -0.666 4.305 -4.932 3.297 -4.932 -1.204 0 -11.242 1.23 -11.242 5.805 0 2.746 4.368 2.6 4.368 5.616 0 2.81 -5.337 5.998 -8.111 6.655" fill="#FFFFFF"/><path d="M27.389 28.489c-0.676 0 -1.243 -0.507 -1.323 -1.178 -0.078 -0.671 0.359 -1.292 1.016 -1.448 2.797 -0.663 7.087 -3.655 7.087 -5.361 0 -0.733 -0.473 -1.102 -1.635 -1.828 -1.154 -0.723 -2.732 -1.711 -2.732 -3.788 0 -5.805 10.924 -7.136 12.573 -7.136 0.528 0 1.131 0.367 1.344 0.85 0.444 1.006 -0.221 1.736 -1.68 3.335 -0.395 0.431 -1.029 1.128 -1.42 1.633 0.801 0.647 1.596 1.198 2.371 1.734 2.353 1.63 4.573 3.169 4.573 6.239 0 4.805 -6.221 6.947 -20.174 6.947m12.089 -17.689c-3.016 0.619 -7.014 1.981 -7.014 4.087 0 0.52 0.351 0.824 1.482 1.529 1.217 0.762 2.886 1.807 2.886 4.087 0 1.895 -1.547 3.72 -3.476 5.155 7.498 -0.465 11.546 -1.885 11.546 -4.115 0 -1.607 -1.113 -2.446 -3.426 -4.05 -1.001 -0.694 -2.135 -1.479 -3.273 -2.477 -0.27 -0.237 -0.51 -0.741 -0.53 -1.097 -0.05 -0.889 0.608 -1.778 1.807 -3.117" fill="#27323A"/><path d="M59.946 66.225c-1.898 1.087 -5.239 2.387 -9.141 2.826 -0.364 0.042 -0.712 0.182 -1.001 0.406l-0.445 0.359c-0.291 0.278 -0.504 0.478 -1.263 0.478H26.143c-0.754 0 -0.97 -0.203 -1.409 -0.603l-0.289 -0.226a2.003 2.003 0 0 0 -1.009 -0.413c-3.978 -0.447 -7.376 -1.788 -9.242 -2.826z" fill="#79CCBF"/><path d="m49.146 59.679 -0.439 0.413c-0.382 0.429 -0.785 0.819 -1.191 1.193l-2.394 2.296H28.101l-1.417 -1.349 -0.941 -0.897c-5.454 -5.189 -9.502 -14.567 -11.301 -26.027h44.324c-0.026 0.159 -2.108 15.62 -9.619 24.37" fill="#F4CE73"/></svg>
                <div class="exam-info">
                    <h3>{{ exam.title }}</h3>
                    <p>Skills you'll gain: {{ exam.skills }}</p>
                    <a href="{{ url_for('exam', exam_id=exam.id, question_number=1) }}" class="exam-link">Start Exam</a>
                </div>
            </div>
            {% endfor %}
        </div>
        <h2>Explore Available Learnings</h2>
        
        <div class="content">
    {% for learn in learnings %}
    <div class="exam-catalog">
        <div class="exam-card">
        <svg width="64px" height="64px" viewBox="0 0 81.92 81.92" class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M67.352 7.79H14.432c-1.08 0 -1.956 0.876 -1.956 1.956v34.558c0 0.097 0.041 0.178 0.056 0.27 0.061 0.912 0.734 1.697 1.666 1.829l5.263 0.739c4.035 0.581 8.942 1.289 13.435 1.773v2.593H14.947c-1.08 0 -1.956 0.876 -1.956 1.956v18.886c0 1.08 0.876 1.956 1.956 1.956h52.176c1.08 0 1.956 -0.876 1.956 -1.956V53.465c0 -1.08 -0.876 -1.956 -1.956 -1.956H48.22v-2.486c4.606 -0.469 9.741 -1.228 13.904 -1.839l5.487 -0.78c0.994 -0.143 1.707 -1.024 1.676 -2.008 0 -0.031 0.02 -0.056 0.02 -0.092V9.746c0 -1.08 -0.876 -1.956 -1.956 -1.956" fill="#27323A"/><path d="M16.903 55.421h48.263V70.394H16.903z" fill="#F4CE73"/><path d="M36.808 51.508v-2.232c1.574 0.117 3.047 0.194 4.31 0.194 0.958 0 2.048 -0.051 3.189 -0.122v2.16zm28.587 -8.743 -3.841 0.545c-6.43 0.948 -15.228 2.247 -20.435 2.247 -5.288 0 -14.423 -1.325 -21.092 -2.288l-3.638 -0.51V11.702h49.007v31.063z" fill="#FFFFFF"/><path d="M47.94 63.873h13.089c1.08 0 1.956 -0.876 1.956 -1.956 0 -1.08 -0.876 -1.956 -1.956 -1.956H47.94c-1.08 0 -1.956 0.876 -1.956 1.956 0 1.08 0.876 1.956 1.956 1.956M39.152 43.29c0 -0.963 0.784 -1.748 1.747 -1.748 0.958 0 1.742 0.785 1.742 1.748 0 0.958 -0.785 1.742 -1.742 1.742 -0.963 0 -1.748 -0.785 -1.748 -1.742m-19.09 -29.891c-0.718 0 -1.304 0.581 -1.304 1.304V39.505c0 0.724 0.586 1.304 1.304 1.304h41.67c0.718 0 1.304 -0.581 1.304 -1.304V14.703c0 -0.723 -0.586 -1.304 -1.304 -1.304z" fill="#27323A"/><path d="M60.428 16.008v22.193h-39.062v-22.193z" fill="#79CCBF"/></svg>
            <div class="exam-info">
                <h3>{{ learn.title }}</h3>
                <p>{{ learn.desc }}</p>
                <a href="{{ url_for('learn', code=learn.code) }}" class="exam-link">View Study Guide</a>
            </div>
            
        </div>
    </div>
     {% endfor %}
</div>
       
    </div>
    
<script>
        // ASCII Cat Frames
        const catFrames = [
            `
        |\\---/|
        | o_o |
         \\_^_/
            `,
            `
        |\\---/|
        | -_- |
         \\_^_/
            `,
            `
        |\\---/|
        | >_< |
         \\_^_/
            `,
            `
        |\\---/|
        | ^_^ |
         \\_^_/
            `
        ];

        // Animation Variables
        const catElement = document.getElementById('ascii-cat');
        let frameIndex = 0;

        // Function to Animate Cat
        function animateCat() {
            catElement.innerText = catFrames[frameIndex];
            frameIndex = (frameIndex + 1) % catFrames.length;
        }

        // Start Animation
        setInterval(animateCat, 300); // Change frames every 300ms
    </script>
 
 <script>
        // Open Modal
        function openModal() {
            document.getElementById('taskModal').style.display = 'flex';
        }

        // Close Modal
        function closeModal() {
            document.getElementById('taskModal').style.display = 'none';
        }

       document.querySelector('.todo-form').addEventListener('submit', function () {
    closeModal();
});
    </script>
    
 <script>
        // Function to update the current time
        function updateTime() {
            const currentTimeDiv = document.getElementById('current-time');
            const now = new Date();
            const options = {  hour: '2-digit', minute: '2-digit', second: '2-digit' };
            currentTimeDiv.innerText =  now.toLocaleDateString('en-US', options);
        }

// Function to generate a simple calendar for the current month
function generateCalendar() {
    const calendarDiv = document.getElementById('calendar');
    const now = new Date();
    const year = now.getFullYear();
    const month = now.getMonth();
    const today = now.getDate(); // Get the current date

    const monthNames = [
        "January", "February", "March", "April", "May", "June", "July",
        "August", "September", "October", "November", "December"
    ];

    const firstDay = new Date(year, month, 1).getDay();
    const lastDate = new Date(year, month + 1, 0).getDate();

    let calendarHTML = `<h3>${monthNames[month]} ${year}</h3>`;
    calendarHTML += `
        <table>
            <thead>
                <tr>
                    <th>Sun</th>
                    <th>Mon</th>
                    <th>Tue</th>
                    <th>Wed</th>
                    <th>Thu</th>
                    <th>Fri</th>
                    <th>Sat</th>
                </tr>
            </thead>
            <tbody>
    `;

    let day = 1;
    for (let i = 0; i < 6; i++) {
        calendarHTML += '<tr>';
        for (let j = 0; j < 7; j++) {
            if (i === 0 && j < firstDay || day > lastDate) {
                calendarHTML += '<td></td>'; // Empty cells
            } else {
                if (day === today) {
                    // Highlight the current date
                    calendarHTML += `<td style="background-color: #79CCBF; color: white; border-radius: 50%;">${day}</td>`;
                } else {
                    calendarHTML += `<td>${day}</td>`;
                }
                day++;
            }
        }
        calendarHTML += '</tr>';
        if (day > lastDate) break;
    }

    calendarHTML += '</tbody></table>';
    calendarDiv.innerHTML = calendarHTML;
}

// Initialize the widget
document.addEventListener('DOMContentLoaded', () => {
    updateTime();
    generateCalendar();
    setInterval(updateTime, 1000); // Update the time every second
});

    </script>
    
</body>
</html>